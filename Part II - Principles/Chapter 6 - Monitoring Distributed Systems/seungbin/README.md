## Part 02 - Principles

# Chapter 6 - Monitoring Distributed Systems
## Summary 

### 정의

이번 챕터에서 사용되는 용어 정의 

- 모니터링
	- 쿼리의 수와 종류, 에러의 수와 종류 등 시스템에 대한 정량적 실시간 데이터를 모으고 처리하고 집계해서 보여주는 것을 의미
	  
- 화이트박스 모니터링
	- 로그나 JVM의 프로파일링 인터페이스, 내부 통계 지표를 제공하는 HTTP 핸들러 등을 이용해서 얻은 **시스템의 내부 지표들을 토대로 하는 모니터링**
	  
- 블랙박스 모니터링
	- 사용자가 보게 되는 확인 가능한 동작들을 외부에서 테스트하는 과정을 의미
	- 시스템이 지금 현재 올바로 동작하지 않고 있는 상황을 알기 위한 것
	  
- 노드와 머신
	- 물리적인 서버, VM, 컨테이너에서 동작하는 커널의 단일 인스턴스를 의미
		
	- 한 머신이 모니터링할 여러 개의 서비스를 운영하고 있을 수도 있다
		- 서로 관련된 서비스
		- 서로 관련이 없지만 하드웨어만 공유하는 서비스

### 구글의 모니터링 방식

구글은 최종 사용자의 요청률에서 예측하지 못한 변화를 탐지하는 규칙을 통해 구체적이면서도 심각한 예외를 매우 빠르게 찾아낸다.

모니터링 시스템에 있어 중요한 것은 최대한 간결하면서도 팀 모두가 이해할 수 있도록 유지하는 것이다. 

중요도가 낮은 서비스들에 대해서는 화이트박스 모니터링을 수행하지만, 반대의 경우에는 블랙박스 모니터링을 수행한다.

블랙박스 모니터링은 아직 발생하지 않았지만 곧 발생할 문제에 대해서는 거의 도움이 되지 않는다. 

### 네 가지 결정적 지표

- 지연응답
	- 요청이 서비스에 의해 처리되기까지의 시간을 의미
	  
- 트래픽
	
- 에러
	- 실패한 요청의 비율을 의미
	- 명시적인 실패(실제로 에러가 발생) /  묵시적인 실패(정책과 관련된 실패) 모두 고려
	   
- 서비스 포화 상태
	- 가장 병목이 발생하는 리소스를 집중해서 측정
	- 긴급한 상황을 미리 예측하는 것과 관련이 깊음 
