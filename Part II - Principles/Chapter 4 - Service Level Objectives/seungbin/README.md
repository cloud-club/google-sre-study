## Part 02 - Principles

# Chapter 4 - Service Level Objectives
## Summary 
### **SLI (Service Level Indicator) - 서비스 수준 척도**

서비스 수준을 판단하기 위해 **정량적으로 측정한 값**을 의미한다.

대부분의 서비스에서 핵심 SLI로 사용하는 지표는 다음과 같다.

- **응답 속도**: 요청을 처리하는 데 걸리는 시간
- **에러율**: 수신한 전체 요청 대비 실패한 요청 비율 (예: HTTP 500 오류 발생률)
- **처리량(Throughput)**: 초당 처리할 수 있는 요청 수

이러한 값들은 **일정 기간 동안 수집된 데이터를 바탕으로 비율, 평균, 백분위수(percentile) 등을 계산하여 분석**된다. 특히, **평균보다는 분포(percentile)가 더 중요한 경우가 많다**. 평균 값은 특정 시점에서 발생한 급격한 요청 증가(스파이크)를 제대로 반영하지 못하기 때문이다.

SLI는 주로 **쿠버네티스, 프로메테우스, 로그 분석 도구** 등을 통해 **서버 측에서 수집**된다. 그러나 **사용자의 실제 경험을 측정하기 위해 클라이언트 측 데이터도 함께 수집하는 것이 중요하다**.

여러 가지 서비스 수준 척도가 존재하지만, SRE 팀에서 가장 중요하게 여기는 지표 중 하나는 **서비스의 가용성(Availability)** 이다. 일반적으로 이는 **올바른 요청이 성공적으로 처리된 비율**을 의미한다.

SLI를 명확하게 설정하려면 **사용자가 원하는 것이 무엇인지 이해하는 것이 중요**하다.

- **사용자가 직접 대면하는 서비스**: **가용성, 응답 시간, 처리량**이 중요
- **저장소 시스템(Storage systems)**: **응답 시간, 가용성, 내구성**이 중요
- **빅데이터 시스템(Big Data systems)**: **처리량, 종단 간 응답 시간(end-to-end latency)**이 중요

---

### **SLO (Service Level Objectives) - 서비스 수준 목표**

SLI로 측정된 서비스 수준에 대해 **목표값 또는 허용 범위를 정의한 것**을 의미한다.

SLO는 다음과 같은 수식으로 표현할 수 있다.

- `SLI ≤ 목표치` 
- `최솟값 ≤ SLI ≤ 최댓값` 

SLO를 설정하고 이를 고객에게 공개하면 **서비스 동작에 대한 예측 가능성을 높일 수 있다**.  
예를 들어, 특정 서비스의 SLO가 **"요청당 평균 응답 시간을 100ms 이내로 유지"**라고 설정될 수 있다.

또한, SLO를 달성하지 못한 비율은 **사용자가 서비스 품질을 어떻게 인식하는지를 평가하는 데 유용한 척도**가 된다.  
따라서 SLO를 일 단위 또는 주 단위로 추적하여 **장기적인 트렌드를 파악하고, 장애 발생 전에 문제 조짐을 미리 감지하는 것이 중요**하다.

하지만 **적절한 SLO를 설정하는 것은 생각보다 복잡한 작업**이다.

- 서비스 이용자 수처럼 **불규칙하고 외부 요인에 따라 변하는 지표**는 관리가 어렵다.
- 현재의 성능을 기준으로 목표치를 설정하면, 이후 변화에 따라 **비현실적인 목표가 될 가능성이 높다**.
- 따라서 **최대한 단순하게 설정**하고, 서비스 특성을 정확히 반영하는 **최소한의 SLO**를 설정하는 것이 바람직하다.

---

### **SLA (Service Level Agreement) - 서비스 수준 협약**

SLA는 **SLO가 충족되었을 때 또는 충족되지 않았을 때의 보상 조건을 명시한 계약**을 의미한다.

일반적으로 **SRE는 SLA 체결 과정에는 관여하지 않지만**, 서비스 운영 측면에서 **SLO를 유지하여 SLA 위반을 방지하는 역할을 담당**한다.

모든 서비스에 SLA가 존재하는 것은 아니다.

- 예를 들어, **구글 검색**은 SLA가 없지만, 검색 기능이 중단되면 **기업의 평판 악화 및 광고 수익 감소 등 부정적인 영향을 초래할 수 있다**.
- 반면, **B2B 서비스(예: Google Workspace, Cloud 서비스)** 는 고객과 **명확한 SLA를 체결** 하며, SLA 위반 시 환불 또는 크레딧 제공 등의 보상이 이루어질 수 있다.