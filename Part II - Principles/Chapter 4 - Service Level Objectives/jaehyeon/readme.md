# Chapter 4 - 서비스 수준 목표

서비스를 운영하는 데 있어 가장 중요한 지표들과 이 지표들을 측정하고 평가하는 방법에 대해 이해을 해야한다. 사용자에게 필요한 서비스의 적정 수준을 정의하고 제공해야한다.

### 서비스 수준 척도(Service Level Indicator, SLI)

서비스 수준을 판단할 수 있는 몇가지를 정량적으로 측정한 값. 예를 들면 응답 속도, 전체 요청 수 대비 에러율, 시스템 처리량 등. 또한 가용성은 중요한 척도 중 하나이다. 보통 9로 표기함(99.999%)


### 서비스 수준 목표(Service Level Objectives, SLO)

SLI에 의해 측정된 서비스 수준의 목표 값 또는 일정 범위의 값. SLO는 SLI <= 목표치 또는 최솟값 <= SLI <= 최댓값으로 표현할 수 있다.

예를 들어 평균 검색 요청의 응답 시간에 대한 SLO는 100밀리초 이하로 설정할 수 있다.

적절한 SLO를 설정하는 것은 복잡하다. 너무 다양한 환경 요소에 의해 SLI가 결정되기 때문. 또한 제품과 사업에 큰 영향을 미친다. 따라서 SRE는 SLO를 선택하는 논의에 반드시 참여해야 한다. 발생 가능한 위험과 여러 선택 사항들의 실행 가능성에 대해 조언을 할 수 있어야 한다.

- 현재의 성능을 기준으로 목표치를 설정하지 말 것
- 최대한 단순하게 생각할 것
- 자기 만족에 얽매이지 말 것
- 가능한 적은 수의 SLO를 설정할 것
- 처음부터 완벽하게 하려고 하지 말 것

### 서비스 수준 협약(Service Level Agreements, SLA)

SLA는 SLO를 만족헀을 경우 또는 그렇지 못한 경우의 댓가에 대한 사용자와의 계약을 의미한다. 댓가란 대부분 경제적인 것(환불이나 벌금 등)으로 대변된다.

SLA가 존재하지 않는 경우도 있다. 구글 검색이 좋은 예. 구글은 전 세계의 몯느 사용자와 계약을 맺지 않기 때문. 하지만 자체적인 SLO는 당연히 존재한다.

## 지표

모니터링 시스템을 통해 추적할 수 있는 모든 지표는 SLI가 아니다. 정말 중요한 것을 현명하게 선택해야 한다. 적절한 SLI를 선정하기 위해 시스템들을 다음 몇 가지로 분류할 수 있다.

- 사용자가 직접 대면하는 시스템: 가용성 ,응답 시간, 처리량이 중요 
- 저장소 시스템: 응답 시간, 가용성, 내구성이 중요
- 데이터 처리 파이프라인: 처리량, 종단 간 응답 시간이 중요

정확성도 중요하지만 시스템 데이터에 대한 것이므로 SRE가 관여하지 않음.

대부분의 지표들의 경우 평균보다는 분포가 중요한다. 예를 들어 응답 시간의 경우, 일부 요청은 빠르게 처리되었을 수 있지만 나머지는 균일하게 또는 더 느리게 처리되었을 수 있다. 단순히 평균만 집계하면 이렇게 느리게 처리된 요청을 알기 어렵다.